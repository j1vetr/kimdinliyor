Bir web uygulaması geliştir: “Spotify Oda Oyunu” (multiplayer).

GENEL AMAÇ
Kullanıcılar oda oluşturup link ile arkadaşlarını davet eder. Her kullanıcı sadece isim girer ve Spotify hesabını bağlar. Oyun başladığında, odadaki kullanıcıların kendi dinleme geçmişlerinden/playlistlerinden türetilen verilerle rastgele bir şarkı seçilir ve “Bu şarkıyı kim/kimler dinliyor?” sorusu sorulur. Kullanıcılar tekli veya çoklu seçim yapar, 20 saniyelik süre biter veya herkes cevaplayınca sonuçlar gösterilir, puan yazılır.

TASARIM / UI-UX (KULLANICI ODAKLI)
- Dark tema: antrasit tonlar (kömür gri), modern, premium, sade ama etkileyici.
- Font: Poppins.
- Mobil öncelikli, masaüstünde de çok şık.
- Animasyonlar: hafif, hızlı, akıcı (lobby ve sonuç ekranında küçük geçişler).
- Ekranlar:
  1) Ana sayfa: “Oda Oluştur” + “Odaya Katıl” (oda kodu gir)
  2) Oda Oluştur: oda adı, max kişi, herkese açık mı/şifreli mi, şifre alanı (opsiyonel)
  3) Katılım sayfası: sadece “İsim” alanı + “Spotify Bağla” butonu (Spotify bağlamadan odaya giremesin)
  4) Lobby: oyuncu listesi, bağlı durumu, host için “Oyunu Başlat” butonu
  5) Oyun ekranı: seçilen şarkının kapak görseli + sanatçı + şarkı adı (veya oyun moduna göre ipucu), altında “kim/kimler dinliyor?” seçimi (çoklu seçim destekle)
  6) Sonuç ekranı: doğru cevap, kimler doğru yaptı, puan tablosu, “Sonraki Tur”

ODA MANTIĞI
- Oda oluşturulunca URL formatı:
  /oyun/O314123 gibi “O” + 6 haneli random sayı üret.
- Oda ayarları: oda adı, max kişi, public/private, password (private ise zorunlu).
- Host/oda sahibi: odayı oluşturan kişi.

SPOTIFY BAĞLAMA (AUTH)
- Replit Auth KULLANMA.
- Kullanıcı Spotify hesabıyla bağlanacak. Bağlanınca kullanıcıya ait dinleme verileri/playlist verileri oyun için kullanılacak.
- Kullanıcıdan açık onay al: “Dinleme geçmişim/playlist verilerim bu oda oyununda kullanılacaktır.” checkbox olmadan devam ettirme.
- Uygulama, her kullanıcı için token’ı güvenli şekilde saklar ve gerektiğinde yeniler.

OYUN KURALLARI
- Oyun turlarla ilerlesin.
- Tur başında: odadaki tüm kullanıcıların verilerinden bir “şarkı havuzu” oluştur.
  - Havuz kaynakları: son dinlenenler + (opsiyonel) en çok dinlenenler + (opsiyonel) seçilen playlistler.
- Rastgele 1 şarkı seç.
- Soru: “Bu şarkıyı kim/kimler dinliyor?”
- Doğru cevap: seçilen şarkı hangi kullanıcıların verisinde geçiyorsa onlar.
- Cevap süresi: maksimum 20 saniye.
- Herkes erken cevap verirse süre bitmeden tur sonuçlansın.
- Puanlama:
  - Doğru tam eşleşme: +10
  - Kısmi doğru (bazılarını doğru seçip bazılarını kaçırma): +5
  - Yanlış (fazladan kişi seçme / tamamen yanlış): 0
- Skorlar oda bitene kadar canlı güncellensin.

GERÇEK ZAMANLI AKIŞ
- Lobby ve oyun ekranı gerçek zamanlı çalışsın:
  - Odaya giriş/çıkış anlık güncellensin.
  - Tur sorusu herkese aynı anda gelsin.
  - Cevaplar ve sayaç (20sn) eş zamanlı aksın.
  - Sonuçlar aynı anda açılsın.

VERİTABANI
- Her şeyi PostgreSQL’de tut:
  - Users (anon kullanıcı: isim, spotify bağlantı bilgisi, created_at)
  - Rooms (code, name, max_players, is_public, password_hash, host_user_id, status)
  - RoomPlayers (room_id, user_id, joined_at, is_ready)
  - SpotifyTokens (user_id, access_token, refresh_token, expires_at)
  - TracksCache (room_id, track_id, track_name, artist, album_art_url, source_user_ids, created_at)
  - Rounds (room_id, round_no, track_id, started_at, ended_at)
  - Answers (round_id, user_id, selected_user_ids, is_correct, score, answered_at)
  - Scoreboard (room_id, user_id, total_score)
- Aynı oda kodu tekrar üretilmesin (unique).

GÜVENLİK / KURALLAR
- Private oda şifresi hash’li saklansın.
- Kullanıcıların token’ları asla istemciye açık şekilde dökülmesin.
- Rate limit: oda oluşturma ve girişte basit koruma.
- Hatalar kullanıcıya dostça mesajlarla gösterilsin.

KULLANICI DETAYLARI
- Giriş sistemi: sadece isim + spotify bağlama (email şifre yok).
- Aynı isimde kullanıcı olursa sonuna otomatik kısa ek ekle (Emir, Emir#2 gibi).
- Oda doluysa uyarı ver.
- Bağlanmayan kullanıcı lobby’de görünmesin, önce spotify bağlasın.

TESLİM
- Baştan sona çalışan bir MVP üret:
  - Oda oluştur/katıl
  - Spotify bağlama
  - Lobby
  - Oyun turları + sayaç + cevap + sonuç + skor
  - PostgreSQL kalıcılığı
- Uygulama yayına hazır olsun, UI çok kaliteli olsun.
